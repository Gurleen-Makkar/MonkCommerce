# Monk Commerce - Coupon Management System

[Watch the Demo Video](video.mov)

A comprehensive coupon management system that supports various types of discounts and promotional offers.

## Implemented Features

### Cart-wise Coupons
- Basic Discount Rules
  - Percentage-based discounts (e.g., 10% off on orders above ₹1000)
  - Flat discounts (e.g., ₹500 off on orders above ₹5000)
  - Maximum discount caps
  - Minimum purchase requirements
  - Maximum discount limits per user/month
  - Stackable vs non-stackable rules

- Time-based Rules
  - Happy Hours (specific time windows)
  - Weekend Specials
  - Flash sale periods
  - Peak vs off-peak pricing
  - Seasonal discounts
  - Holiday-specific offers
  - Limited time promotions
  - Early bird discounts
  - Last-minute deals

- User-based Rules
  - First-time user discounts
  - New vs existing user differentiation
  - Loyalty tier-based discounts
  - Account age-based offers
  - Purchase history-based offers
  - Membership status discounts
  - Referral rewards
  - Win-back offers for inactive users

- Location & Device Rules
  - Geographic location restrictions
  - Store-specific discounts
  - Region-based pricing
  - Device-specific discounts (mobile/desktop)
  - App-only offers
  - In-store vs online pricing
  - Delivery zone-based discounts
  - Click-and-collect discounts

- Payment & Fulfillment Rules
  - Payment method specific discounts
  - Bank-specific offers
  - EMI-based discounts
  - Digital wallet incentives
  - Prepaid order discounts
  - Free shipping thresholds
  - Express delivery discounts
  - Pickup location discounts

- Cart Composition Rules
  - Minimum/maximum items
  - Category mix requirements
  - Brand mix requirements
  - New product combination rules
  - Clearance item rules
  - Premium product rules
  - Mixed cart restrictions
  - Weight-based rules

### Product-wise Coupons
- Basic Product Discounts
  - Percentage discounts on specific products
  - Fixed amount off specific products
  - Buy one at X% off
  - Minimum quantity requirements
  - Maximum quantity limits
  - Stackable with other coupons
  - Non-stackable restrictions

- Category & Collection Rules
  - Product category restrictions
  - Department-specific discounts
  - Collection-based offers
  - Season-specific discounts
  - Gender-specific discounts
  - Age group-specific discounts
  - Style-based discounts
  - Theme-based discounts

- Variant & Attribute Rules
  - Size-specific discounts
  - Color-specific discounts
  - Material-based discounts
  - Quality grade discounts
  - Package size discounts
  - Bundle-specific pricing
  - Configuration-based pricing
  - Customization-based pricing

- Quantity & Volume Rules
  - Bulk purchase discounts
  - Tiered quantity pricing
  - Volume-based discounts
  - Wholesale pricing rules
  - Minimum order quantity
  - Maximum order quantity
  - Progressive quantity discounts
  - Declining balance discounts

- Timing & Availability Rules
  - New product launch discounts
  - End of season discounts
  - Clearance sale discounts
  - Pre-order discounts
  - Back-in-stock discounts
  - Limited time offers
  - Flash sale pricing
  - Inventory clearance rules

- Special Product Rules
  - Limited edition discounts
  - Exclusive product offers
  - Brand collaboration discounts
  - Influencer collection discounts
  - Designer edition discounts
  - Signature series pricing
  - Collector's item pricing
  - Anniversary edition discounts

### Buy X Get Y (BxGy) Coupons
- Basic BxGy Rules
  - Multiple product combinations
  - Repetition limits
  - Mix and match options
  - Stackable with product discounts
  - Quantity thresholds
  - Value thresholds
  - Time period restrictions
  - User limits

- Product Combination Rules
  - Same product BxGy (Buy 2 Get 1)
  - Different variant BxGy
  - Cross-product BxGy
  - Cross-category BxGy
  - Cross-brand BxGy
  - Premium-budget combinations
  - New-clearance combinations
  - Seasonal combinations

- Quantity & Value Rules
  - Limited quantity BxGy
  - Unlimited quantity BxGy
  - Value-based BxGy
  - Weight-based BxGy
  - Size-based BxGy
  - Category-value combinations
  - Mixed value combinations
  - Progressive value rules

- Time & Availability Rules
  - Time-sensitive BxGy
  - Day-specific BxGy
  - Peak hour BxGy
  - Off-peak BxGy
  - Season-specific BxGy
  - Holiday-specific BxGy
  - Flash sale BxGy
  - Limited time BxGy

- Category & Brand Rules
  - Category-wide BxGy
  - Brand-specific BxGy
  - Department-wide BxGy
  - Collection-specific BxGy
  - Style-specific BxGy
  - Theme-based BxGy
  - Collaboration BxGy
  - Exclusive BxGy

- Advanced BxGy Rules
  - Combo product BxGy
  - Multi-tier BxGy (Buy 2 Get 1, Buy 4 Get 2)
  - Progressive BxGy (increasing benefits)
  - Declining BxGy (decreasing benefits)
  - Mixed category progression
  - Cross-brand progression
  - Value-based progression
  - Time-based progression

### Complex Discount Scenarios
- Currency & Pricing Rules
  - Multi-currency support with real-time exchange rates
  - Dynamic regional pricing
  - Market-specific pricing strategies
  - Wholesale vs retail pricing tiers
  - B2B vs B2C pricing structures
  - Bulk order pricing matrices
  - Custom price lists per customer segment
  - Seasonal pricing adjustments

- Tax & Regulatory Rules
  - Tax-exclusive vs inclusive discounts
  - GST/VAT handling on discounts
  - State-specific tax calculations
  - Industry-specific tax rules
  - Regulatory compliance handling
  - Documentation requirements
  - Audit trail maintenance
  - Legal disclaimer handling

- Shipping & Fulfillment Rules
  - Free shipping threshold calculations
  - Location-based shipping rates
  - Weight-based shipping discounts
  - Time-sensitive delivery pricing
  - Express shipping incentives
  - International shipping rules
  - Local delivery optimizations
  - Click-and-collect pricing

- Marketplace & Seller Rules
  - Marketplace seller commissions
  - Seller-specific discount rules
  - Platform fee adjustments
  - Commission tier calculations
  - Seller performance incentives
  - Category-based commission rates
  - Promotional fee structures
  - Settlement calculations

- Order Processing Rules
  - Split order handling
  - Partial cancellation adjustments
  - Return policy implications
  - Price protection handling
  - Order modification rules
  - Backorder pricing
  - Pre-order discounts
  - Bulk order splitting

- Dynamic Pricing Rules
  - Real-time price adjustments
  - Competitor price matching
  - Demand-based pricing
  - Inventory-based pricing
  - Time-based price changes
  - Bundle pricing optimization
  - Flash sale pricing
  - Clearance pricing rules

- Stacking & Priority Rules
  - Multiple discount combinations
  - Stackable coupon hierarchies
  - Priority calculation logic
  - Maximum benefit calculation
  - Conflict resolution rules
  - Override permissions
  - Exclusion handling
  - Combination limits

- Advanced Scenarios
  - Cross-border commerce rules
  - Multi-store pricing
  - Franchise pricing rules
  - Enterprise customer pricing
  - Subscription pricing rules
  - Membership tier pricing
  - Event-based pricing
  - Time-sensitive combinations

### Additional Features
- Validation & Control
  - Coupon expiry date management
  - Usage limit tracking
  - Validation rule engine
  - Maximum discount caps
  - Real-time applicability checking
  - Automatic best discount calculation
  - Fraud detection rules
  - Abuse prevention mechanisms

- Monitoring & Analytics
  - Usage pattern analysis
  - Performance metrics tracking
  - ROI calculations
  - Customer segment analysis
  - Redemption rate monitoring
  - A/B testing frameworks
  - Conversion tracking
  - Revenue impact analysis

- Integration & APIs
  - Third-party system integration
  - Webhook support
  - API rate limiting
  - Data synchronization
  - External service callbacks
  - Event broadcasting
  - Audit logging
  - Error tracking

- User Experience
  - Coupon discovery engine
  - Personalized recommendations
  - Search optimization
  - Mobile responsiveness
  - Accessibility features
  - Multi-language support
  - Social sharing
  - User feedback collection

- Administration & Management
  - Bulk operation tools
  - Campaign management
  - User role management
  - Approval workflows
  - Audit trails
  - Performance reporting
  - System configuration
  - Error handling

- Security & Compliance
  - Access control
  - Data encryption
  - Audit logging
  - Compliance reporting
  - Privacy controls
  - Rate limiting
  - Fraud prevention
  - Error handling

## Unimplemented Scenarios (Due to Time Constraints)

### User-specific Features
- Referral coupons with multi-level benefits
- User history-based personalized coupons
- Loyalty tier-based dynamic discounts
- Birthday/anniversary specials
- Customer segment specific offers
- VIP customer exclusive discounts
- Win-back offers for dormant customers
- First purchase vs repeat purchase
- Social media sharing incentives
- Review/rating based rewards
- Membership program integration
- Corporate/bulk buyer discounts
- Student/senior citizen discounts
- Professional association discounts

### Advanced Discount Types
- Bundle discounts (discount on specific product combinations)
- Flash sale coupons with countdown timers
- Seasonal/holiday-specific dynamic pricing
- Progressive discounts (increasing with cart value)
- Multi-tier discounts with complex rules
- Early bird discounts
- Last-minute deals
- Abandoned cart recovery offers
- Subscription renewal discounts
- Pre-booking discounts
- Waitlist priority discounts
- Limited quantity flash deals
- Door crasher specials
- Loss leader promotions

### Complex Combinations
- Cross-category conditional discounts
- Brand-specific tiered discounts
- Subscription-based dynamic pricing
- Group buying with threshold unlocks
- Multi-brand collaboration offers
- Category-specific bundle deals
- Time-sensitive combo offers
- Seasonal product bundles
- New launch combinations
- Clearance with regular items
- Premium with budget products
- Online-offline combination offers
- Market-specific combinations
- Event-triggered combinations

### Additional Features
- Coupon usage analytics
- A/B testing support
- Dynamic pricing rules
- Fraud prevention
- Coupon sharing/gifting

## Assumptions

1. Product Data
   - Products have fixed prices
   - Each product belongs to one category
   - Product inventory is not tracked

2. Cart Functionality
   - One coupon per transaction (unless stackable)
   - Free shipping threshold is fixed at ₹1000
   - Cart items persist in Redux store

3. Coupon Application
   - Best discount is automatically suggested
   - Coupons are validated in real-time
   - Server time is used for time-based restrictions

## Limitations

1. Technical Limitations
   - No user authentication system
   - No persistent storage for user history
   - Limited error handling
   - No rate limiting implemented
   - No real-time inventory tracking
   - Limited concurrent transaction handling
   - No distributed caching system
   - No automated testing for edge cases
   - Limited performance optimization
   - No webhook support for external integrations
   - No audit logging system
   - Limited scalability for high traffic scenarios

2. Business Logic Limitations
   - Cannot combine multiple non-stackable coupons
   - No support for percentage+fixed hybrid discounts
   - No support for tiered discounts
   - Limited to single currency (INR)
   - No support for dynamic pricing rules
   - Limited validation for complex discount combinations
   - No support for cross-border commerce rules
   - No handling of timezone-specific offers
   - Limited support for marketplace scenarios
   - No integration with loyalty point systems
   - No support for subscription-based pricing
   - No handling of bulk/wholesale pricing rules
   - Limited support for tax implications
   - No support for price protection policies

3. UI/UX Limitations
   - Basic coupon discovery
   - Limited sorting/filtering of coupons
   - No coupon sharing functionality
   - No real-time validation feedback
   - Limited mobile responsiveness
   - No support for coupon code scanning
   - No personalized coupon recommendations
   - Limited accessibility features
   - No multi-language support
   - No support for coupon favorites/saving
   - Limited search capabilities
   - No visual discount calculator
   - No coupon comparison tool
   - Limited integration with shopping lists

## Future Improvements

1. Technical Enhancements
   - Add user authentication with role-based access
   - Implement distributed persistent storage
   - Add comprehensive error handling with detailed logging
   - Implement intelligent rate limiting
   - Add request validation with schema versioning
   - Implement real-time inventory synchronization
   - Add distributed caching layer
   - Implement automated testing suite
   - Add performance monitoring and optimization
   - Implement webhook system for integrations
   - Add audit logging and compliance tracking
   - Implement scalable architecture

2. Feature Additions
   - Support for multiple currencies with exchange rates
   - Advanced coupon discovery with ML recommendations
   - Real-time analytics dashboard with insights
   - User behavior tracking and segmentation
   - Multi-level referral system
   - Dynamic pricing engine
   - Fraud detection system
   - A/B testing framework
   - Integration with loyalty programs
   - Advanced inventory management
   - Cross-border commerce support
   - Marketplace seller integration
   - Subscription management system
   - Advanced tax handling

3. UI/UX Improvements
   - AI-powered coupon discovery
   - Advanced search with filters
   - Social coupon sharing
   - Responsive design for all devices
   - Enhanced accessibility features
   - Multi-language support
   - Visual discount calculator
   - Coupon comparison tool
   - Personalized recommendations
   - Real-time validation feedback
   - QR code/barcode scanning
   - Shopping list integration
   - Coupon favorites system
   - Interactive tutorials

## API Documentation

### Endpoints

#### POST /coupons
Create a new coupon
```json
{
  "type": "cart-wise",
  "details": {
    "threshold": 1000,
    "discount": 10,
    "maxDiscount": 200
  },
  "code": "SAVE10",
  "expiryDate": "2024-12-31"
}
```

#### GET /coupons
Retrieve all coupons

#### GET /coupons/{id}
Retrieve a specific coupon

#### PUT /coupons/{id}
Update a specific coupon

#### DELETE /coupons/{id}
Delete a specific coupon

#### POST /applicable-coupons
Get applicable coupons for a cart
```json
{
  "cart": {
    "items": [
      {
        "product_id": 1,
        "quantity": 2,
        "price": 1999.99
      }
    ]
  }
}
```

#### POST /apply-coupon/{id}
Apply a specific coupon to the cart
```json
{
  "cart": {
    "items": [
      {
        "product_id": 1,
        "quantity": 2,
        "price": 1999.99
      }
    ]
  }
}
```

## Setup Instructions

1. Clone the repository
2. Install dependencies:
   ```bash
   cd backend && npm install
   cd frontend && npm install
   ```
3. Start the backend server:
   ```bash
   cd backend && npm start
   ```
4. Start the frontend development server:
   ```bash
   cd frontend && npm run dev
   ```

## Testing

The application includes various test scenarios:
1. Cart-wise coupon validation
2. Product-wise discount calculation
3. BxGy coupon application
4. Time-based restrictions
5. Category-specific discounts
